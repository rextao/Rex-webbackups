# 概述

1. https://github.com/skyline75489/what-happens-when-zh_CN

## 读后总结

1. 介绍下请求一个页面的整个流程

## 内容

1. 当按下回车，作为起始点；键盘逻辑系统会扫描键位的按下，然后将回车键编码为13，用于之后的传输
2. USB传输：
	- 键码13会被存在键盘的一个寄存器中
	- USB控制器会定时10ms扫描这个寄存器
	- 然后通过usb串行接口传输给计算机
	- 计算机的usb控制器会解码，然后给键盘驱动程序进行解释，之后把键码传输给操作系统硬件抽象层
3. 内核处理
	- 计算机系统会查找当前活跃的窗口
	- 调用api将为当前窗口发送消息
	- 这样浏览器知道用户按下的回车键
4. 处理URL
	- 根据URL是否合法，浏览器判断是一个请求还是一个关键词搜索
	- 如是搜索则将文字传递给搜索引擎
	- URL合法会检查是否都是ASCII编码，如不是会进行转码
5. 检查 HSTS 列表
	- “预加载 HSTS（HTTP严格传输安全）”列表，主要是查看哪些网站是需要用https连接的
	- 即使网站不在hsts列表中，第一次发送http后，网站也可向浏览器要求使用https
6. DNS 查询
	- 浏览器先检测缓存中是否有域名
	- 如没有，系统会查看HOST文件中是否有
	- 如都没有，会向dns服务器发送 DNS 查询请求 ，获取目标服务器的ip地址
7. 使用套接字
	- 当浏览器通过dns获得目标服务器的ip地址后
	- 调用系统库函数，请求一个TCP流套接字
	- 将请求给传输层，传输层会将其封装为TCP segment
	- 然后TCP segment将其给网络层，网路层会增加ip等，形成IP packet
	- IP packet进入数据链路层，进行传输
	- 但这还没有开始传输数据，要先进行TCP握手，TLS握手等，准备做好后
	- 发送http请求（google浏览器可能会商讨使用SPDY协议）
	- 服务器接收到http请求后，将需要的数据（页面）返回给浏览器
8. html解析、页面渲染